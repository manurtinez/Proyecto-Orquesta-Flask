{%extends "base.html"%}
{%block title%}Inicio {%endblock title%}
{%block head%}
{{super()}}
{%endblock head%}
{% block content %}

<body>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-info fade show alert-dismissible" role="alert">
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
    <div style="max-width: 500px; margin: 0 auto; padding-top: 40px;">
        <h3>Asociar Taller - Ciclo Lectivo</h3>
        <form method="POST" action="{{url_for('asociarTallerCiclo')}}">
            <div class="row">
                <div class="col">
                    <label for="selectTaller">Selecciona taller:</label>
                    <select id="selectTaller" class="form-control" id="taller" name="taller">
                        {% for t in talleres %}
                        <option value="{{t.id}}">{{t.nombre}}</option>
                        {% endfor %}
                    </select>
                </div>
                <!-- <div class="col" style="padding-bottom: 30px;">
                    <select id="selectCiclo" class="form-control" id="ciclo" name="ciclo">
                        {% for c in ciclos %}
                        <option value="{{c}}">{{c}} - Semestre {{c}}</option>
                        {% endfor %}
                    </select>
                </div> -->
            </div>
            <p id="actt"></p>
        </form>
    </div>
    <!-- <div style="max-width: 700px; margin: 0 auto; padding-top: 40px;">
        <h3>Asociar Taller - Estudiantes</h3>
        <form method="POST" action="{{url_for('asociarTallerEstudiantes')}}">
            <div class="row">
                <div class="col">
                    <select class="form-control" id="taller" name="taller">
                        {% for ct in ciclosTalleres %}
                        <option value="{{ct}}">{{ct['tallernombre']}} - {{ct['cicloinicio']}} - {{ct['ciclofin']}}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col" style="padding-bottom: 30px;">
                    <select class="js-example-basic-multiple" multiple id="estudiantes[]" name="estudiantes">
                        {% for e in estudiantes %}
                        <option value="{{e.id}}">{{e.apellido}}, {{e.nombre}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div>
                <input type="submit" class="btn btn-info" value="Aceptar">
            </div>
        </form>
    </div>
    <div style="max-width: 700px; margin: 0 auto; padding-top: 40px;">
        <h3>Asociar Taller - Docentes</h3>
        <form method="POST" action="{{url_for('asociarTallerDocentes')}}">
            <div class="row">
                <div class="col">
                    <select class="form-control" id="taller" name="taller">
                        {% for ct in ciclosTalleres %}
                        <option value="{{ct}}">{{ct['tallernombre']}} - {{ct['cicloinicio']}} - {{ct['ciclofin']}}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col" style="padding-bottom: 30px;">
                    <select class="js-example-basic-multiple" multiple id="docentes[]" name="docentes">
                        {% for d in docentes %}
                        <option value="{{d.id}}">{{d.apellido}}, {{d.nombre}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div>
                <input type="submit" class="btn btn-info" value="Aceptar">
            </div>
        </form>
    </div> -->
    <script>
        $('#selectTaller').on('change', function(){
            var id = $(this).val();
            console.log(id)
            $.ajax({
                url: "{{url_for('tallerSeleccionado')}}",
                method: "POST",
                contentType: 'application/json',
                data: JSON.stringify({
                    'id': id,
                }),
                success: function(response){
                    $('#actt').html('el ciclo del taller seleccionado es ' + response['idciclo'])
                }
            })
        })
    </script>
</body>
{% endblock content %}